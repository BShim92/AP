<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <title>AP Floor Check — Slot Calculators</title>

  <style>
    :root{
      font-family:-apple-system,system-ui,Segoe UI,Roboto,Arial;

      /* LIGHT THEME */
      --bg:#f6f7fb;
      --panel:#ffffff;
      --stroke:rgba(0,0,0,.10);
      --stroke2:rgba(0,0,0,.14);
      --text:#111827;
      --muted:rgba(17,24,39,.55);

      --good:#25d366;
      --bad:#ff5a5a;
      --warn:#ffb34d;

      --radius:14px;
      --pad:12px;
    }
    *{ box-sizing:border-box; }
    body{ margin:10px; background:var(--bg); color:var(--text); }
    .shell{ max-width:980px; margin:0 auto; }

    /* ======= COMPACT TOP AREA ======= */
    .nav{
      position:sticky; top:0; z-index:50;
      background:rgba(246,247,251,.92);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--stroke);
      padding:6px 0 8px;
    }

    .navRow1{ display:flex; align-items:center; gap:8px; }
    .chipbar{
      display:flex; gap:6px; flex-wrap:wrap;
      flex:1; align-items:center;
    }
    .chip{
      border:1px solid var(--stroke);
      background:#fff;
      color:var(--text);
      border-radius:999px;
      padding:6px 9px;
      font-weight:900;
      font-size:12px;
      cursor:pointer;
      user-select:none;
      line-height:1;
      white-space:nowrap;
    }
    .chip.active{
      border-color:rgba(59,130,246,.45);
      background:rgba(59,130,246,.10);
    }
    .btn{
      border:1px solid var(--stroke);
      background:#fff;
      color:var(--text);
      border-radius:999px;
      padding:6px 10px;
      font-weight:900;
      font-size:12px;
      cursor:pointer;
      user-select:none;
      line-height:1;
      white-space:nowrap;
    }
    .btn:active,.chip:active{ transform: translateY(1px); }

    .navRow2{ margin-top:6px; display:flex; align-items:center; gap:8px; }
    .badge{
      flex:1;
      border:1px solid var(--stroke2);
      border-radius: 12px;
      padding: 8px 10px;
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      min-height: 42px;
    }
    .badge .left{ display:flex; flex-direction:column; gap:1px; }
    .badge .title{ font-weight:1000; font-size:14px; line-height:1.05; }
    .badge .why{ font-size:11px; color:var(--muted); font-weight:800; line-height:1.1; }

    .pill{
      font-weight:1000;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--stroke2);
      min-width: 98px;
      text-align:center;
      letter-spacing:.3px;
      font-size:12px;
      background: rgba(0,0,0,.03);
    }
    .pill.good{ background: rgba(37,211,102,.20); border-color: rgba(37,211,102,.45); }
    .pill.bad{ background: rgba(255,90,90,.20); border-color: rgba(255,90,90,.45); }
    .pill.warn{ background: rgba(255,179,77,.25); border-color: rgba(255,179,77,.55); }
    .pill.neutral{ background: rgba(0,0,0,.03); }

    /* ======= PANELS / LAYOUT ======= */
    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (max-width: 720px){
      .grid2{ grid-template-columns: 1fr; }
    }
    .panel{
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      background: var(--panel);
      padding: var(--pad);
    }
    .panelTitle{
      font-weight:1000;
      font-size:12px;
      letter-spacing:.3px;
      color: var(--muted);
      margin: 0 0 8px;
    }
    .hint{
      margin-top:8px;
      font-size:12px;
      color:var(--muted);
      line-height:1.25;
      font-weight:700;
    }

    /* ======= TOTAL BARS ======= */
    .totalbar{
      border: 1px solid var(--stroke2);
      border-radius: var(--radius);
      padding: 12px 12px;
      text-align: center;
      font-weight: 1000;
      font-size: 26px;
      line-height: 1;
      user-select: none;
      cursor: pointer;
      color: #000;
      background: #fff;
    }
    .t-white{ background:#ffffff; }
    .t-red{ background:#ff5a5a; }
    .t-orange{ background:#ffb34d; }
    .t-yellow{ background:#ffe066; }
    .t-green{ background:#67d36b; }

    /* show/hide games */
    .game{ display:none; }
    .game.active{ display:block; }

    /* ======= Frankenstein (REVERTED: no bet field; multipliers work like your original) ======= */
    #game-frank .fgrid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    #game-frank .fcell{
      position:relative;
      border-radius: var(--radius);
      border: 1px solid rgba(0,0,0,.10);
      min-height: 76px;
      padding: 34px 8px 10px;
      display:flex;
      align-items:flex-end;
    }
    #game-frank .fcell.r0{ background:#ffd6d6; }
    #game-frank .fcell.r1,#game-frank .fcell.r2,#game-frank .fcell.r3{ background:#d9f2ff; }

    #game-frank .w{
      position:absolute;
      top:8px; left:8px;
      font-size: 11px;
      font-weight: 1000;
      background: rgba(255,255,255,.92);
      padding: 2px 8px;
      border-radius:999px;
      border:1px solid rgba(0,0,0,.10);
      color:#000;
      pointer-events:none;
    }
    #game-frank .fcell input{
      width:100%;
      font-size: 18px;
      font-weight: 1000;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,.16);
      background: rgba(255,255,255,.92);
      color:#000;
    }
    #game-frank .footer{ grid-column: 1 / -1; }

    /* ======= Temple Falls (kept from prior) ======= */
    #game-temple .tfRow{
      display:grid;
      grid-template-columns: repeat(5, 1fr) 0.9fr;
      gap:10px;
      align-items:stretch;
    }
    #game-temple .tfCell{
      border-radius: var(--radius);
      border: 1px solid rgba(0,0,0,.10);
      min-height: 64px;
      padding: 8px;
      display:flex;
      align-items:flex-end;
      background:#d9f2ff;
      transition: background 120ms ease;
    }
    #game-temple .tfCell.rainbow{
      background: linear-gradient(90deg,#ff5a5a,#ffb34d,#ffe066,#67d36b,#59c6ff,#9b6bff,#ff5ad9);
    }
    #game-temple .tfCell input{
      width:100%;
      font-size:18px;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,.16);
      background: rgba(255,255,255,.92);
      color:#000;
      font-weight: 1000;
    }
    #game-temple .tfTotal{
      border-radius: var(--radius);
      border: 1px solid rgba(0,0,0,.10);
      background:#f0f0f0;
      min-height: 64px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:1000;
      color:#000;
      font-size:16px;
      user-select:none;
    }
    .miniBtns{ display:flex; gap:8px; }
    .miniBtn{
      flex:1;
      border:1px solid var(--stroke);
      background:#fff;
      color:var(--text);
      border-radius: 12px;
      padding: 10px 10px;
      font-weight:1000;
      font-size:13px;
      cursor:pointer;
      user-select:none;
    }
    .miniBtn:active{ transform: translateY(1px); }

    .field{
      border:1px solid var(--stroke);
      border-radius: 12px;
      padding: 10px;
      background: rgba(0,0,0,.02);
    }
    input, select{
      margin-top:8px;
      width:100%;
      font-size:22px;
      font-weight:1000;
      padding: 10px 10px;
      border-radius: 12px;
      border:1px solid var(--stroke2);
      color:var(--text);
      background: #fff;
      outline:none;
    }
    .label{ font-weight:1000; font-size:12px; letter-spacing:.3px; color:var(--text); }
    .sub{ font-size:11px; color:var(--muted); font-weight:800; }

    .fab{
      position: fixed;
      right: 14px;
      bottom: calc(88px + env(safe-area-inset-bottom));
      z-index: 9999;
      display:flex;
      gap:8px;
    }
    .fab button{
      border: 1px solid var(--stroke2);
      background: #fff;
      color: var(--text);
      border-radius: 16px;
      padding: 14px 16px;
      font-size: 20px;
      font-weight: 1000;
      cursor:pointer;
      user-select:none;
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
    }
    .fab button:active{ transform: translateY(1px); }

    /* other games minimal placeholders style */
    .computed{
      white-space:pre-wrap;
      font-size:12px;
      color: var(--muted);
      line-height:1.25;
      user-select:text;
    }
    details.collapse{
      margin-top:10px;
      border-top: 1px dashed var(--stroke);
      padding-top:10px;
    }
    details.collapse summary{
      cursor:pointer;
      user-select:none;
      font-weight:1000;
      color: var(--muted);
      letter-spacing:.2px;
    }
    .seg{ display:flex; gap:8px; margin-top:8px; }
    .seg button{
      flex:1;
      border:1px solid var(--stroke);
      background:#fff;
      color:var(--text);
      border-radius: 12px;
      padding: 10px 10px;
      font-weight:1000;
      font-size:14px;
      cursor:pointer;
      user-select:none;
    }
    .seg button.active{
      border-color: rgba(59,130,246,.45);
      background: rgba(59,130,246,.10);
    }
  </style>
</head>

<body>
<div class="shell">

  <div class="nav">
    <div class="navRow1">
      <div class="chipbar" id="chipbar"></div>
      <button class="btn" id="resetGameBtn" type="button">Reset</button>
    </div>
    <div class="navRow2">
      <div class="badge">
        <div class="left">
          <div class="title" id="globalTitle">—</div>
          <div class="why" id="globalWhy"></div>
        </div>
        <div class="pill neutral" id="globalPill">—</div>
      </div>
    </div>
  </div>

  <!-- ============================= -->
  <!-- Frankenstein (REWRITTEN/REVERTED) -->
  <!-- ============================= -->
  <section id="game-frank" class="game active" aria-label="Frankenstein">
    <div class="grid2">
      <div class="panel">
        <div class="panelTitle">TOTAL (tap to reset)</div>
        <div id="frankTop" class="totalbar t-white">0.00</div>
        <div class="hint">
          Uses multipliers exactly like your original: total = Σ(input × mult).<br/>
          Defaults: all inputs start at <b>1</b>. Tap total to reset.
        </div>
      </div>

      <div class="panel">
        <div class="panelTitle">GRID</div>

        <div class="fgrid" id="frankGrid">
          <!-- Row 1 (red): 0, 0.4, 1.7 -->
          <div class="fcell r0" data-mult="0">
            <div class="w">0</div>
          </div>

          <div class="fcell r0" data-mult="0.4">
            <div class="w">0.4</div>
            <input class="frankIn" value="1" type="number" inputmode="decimal" step="any" />
          </div>

          <div class="fcell r0" data-mult="1.7">
            <div class="w">1.7</div>
            <input class="frankIn" value="1" type="number" inputmode="decimal" step="any" />
          </div>

          <!-- Row 2 (blue): 1.6, 2.4, 2.0 -->
          <div class="fcell r1" data-mult="1.6">
            <div class="w">1.6</div>
            <input class="frankIn" value="1" type="number" inputmode="decimal" step="any" />
          </div>

          <div class="fcell r1" data-mult="2.4">
            <div class="w">2.4</div>
            <input class="frankIn" value="1" type="number" inputmode="decimal" step="any" />
          </div>

          <div class="fcell r1" data-mult="2.0">
            <div class="w">2.0</div>
            <input class="frankIn" value="1" type="number" inputmode="decimal" step="any" />
          </div>

          <!-- Row 3 (blue): 1.5, 1.25, 0.75 -->
          <div class="fcell r2" data-mult="1.5">
            <div class="w">1.5</div>
            <input class="frankIn" value="1" type="number" inputmode="decimal" step="any" />
          </div>

          <div class="fcell r2" data-mult="1.25">
            <div class="w">1.25</div>
            <input class="frankIn" value="1" type="number" inputmode="decimal" step="any" />
          </div>

          <div class="fcell r2" data-mult="0.75">
            <div class="w">0.75</div>
            <input class="frankIn" value="1" type="number" inputmode="decimal" step="any" />
          </div>

          <!-- Row 4 (blue): 0.75, 0.8, 0.4 -->
          <div class="fcell r3" data-mult="0.75">
            <div class="w">0.75</div>
            <input class="frankIn" value="1" type="number" inputmode="decimal" step="any" />
          </div>

          <div class="fcell r3" data-mult="0.8">
            <div class="w">0.8</div>
            <input class="frankIn" value="1" type="number" inputmode="decimal" step="any" />
          </div>

          <div class="fcell r3" data-mult="0.4">
            <div class="w">0.4</div>
            <input class="frankIn" value="1" type="number" inputmode="decimal" step="any" />
          </div>

          <div id="frankBottom" class="totalbar t-white footer">0.00</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ============================= -->
  <!-- Temple Falls (unchanged here) -->
  <!-- ============================= -->
  <section id="game-temple" class="game" aria-label="Temple Falls">
    <div class="grid2">
      <div class="panel">
        <div class="panelTitle">SETUP</div>
        <div class="field">
          <div class="label">Bet size <span class="sub">(required)</span></div>
          <input id="tfBet" type="number" inputmode="decimal" step="any" placeholder="e.g., 8.80" />
        </div>

        <div class="miniBtns" style="margin-top:10px;">
          <button class="miniBtn" id="tfAddRow" type="button">+ Row (top)</button>
          <button class="miniBtn" id="tfDot" type="button">Insert “.”</button>
        </div>

        <div class="hint">
          Empty cell counts as <b>1</b> (then divided by bet). “.” counts as <b>38</b>.
          Top-added rows are excluded from bottom total.
        </div>
      </div>

      <div class="panel">
        <div class="panelTitle">GRID</div>
        <div id="tfRows" style="display:flex;flex-direction:column;gap:10px;"></div>

        <div class="panelTitle" style="margin-top:10px;">TOTAL (tap to reset)</div>
        <div id="tfTotal" class="totalbar t-white">0.00</div>
      </div>
    </div>

    <div class="fab">
      <button type="button" id="tfDotFab">.</button>
    </div>
  </section>

  <!-- Placeholder sections for other games (keep your existing logic if you want) -->
  <section id="game-regal" class="game"><div class="panel"><div class="panelTitle">Regal Riches</div><div class="computed">[keep your existing Regal section here]</div></div></section>
  <section id="game-ascending" class="game"><div class="panel"><div class="panelTitle">Ascending / Stack Up Pays</div><div class="computed">[keep your existing Ascending section here]</div></div></section>
  <section id="game-golden" class="game"><div class="panel"><div class="panelTitle">Golden Jungle</div><div class="computed">[keep your existing Golden section here]</div></div></section>
  <section id="game-rocket" class="game"><div class="panel"><div class="panelTitle">Rocket Rumble</div><div class="computed">[keep your existing Rocket section here]</div></div></section>

</div>

<script>
(() => {
  const $ = (id) => document.getElementById(id);

  /* ======= NAV ======= */
  const GAMES = [
    { id:"frank", name:"Frank" },
    { id:"temple", name:"Temple" },
    { id:"regal", name:"Regal" },
    { id:"ascending", name:"Ascend" },
    { id:"golden", name:"Golden" },
    { id:"rocket", name:"Rocket" },
  ];

  const chipbar = $("chipbar");
  const globalTitle = $("globalTitle");
  const globalWhy = $("globalWhy");
  const globalPill = $("globalPill");

  function setGlobal(status, title, why){
    globalTitle.textContent = title || "—";
    globalWhy.textContent = why || "";
    globalPill.classList.remove("good","bad","warn","neutral");

    if (status === "AP"){
      globalPill.classList.add("good");
      globalPill.textContent = "AP ✅";
    } else if (status === "NO"){
      globalPill.classList.add("bad");
      globalPill.textContent = "NO ❌";
    } else if (status === "SOFT"){
      globalPill.classList.add("warn");
      globalPill.textContent = "SOFT";
    } else {
      globalPill.classList.add("neutral");
      globalPill.textContent = "—";
    }
  }

  function activeGameId(){
    const active = document.querySelector(".game.active");
    return active ? active.id.replace("game-","") : "frank";
  }

  function showGame(id){
    document.querySelectorAll(".game").forEach(s => s.classList.remove("active"));
    document.getElementById("game-"+id).classList.add("active");
    document.querySelectorAll(".chip").forEach(c => c.classList.toggle("active", c.dataset.game===id));
    evalActive();
  }

  function initNav(){
    chipbar.innerHTML = "";
    for (const g of GAMES){
      const c = document.createElement("div");
      c.className = "chip";
      c.textContent = g.name;
      c.dataset.game = g.id;
      c.addEventListener("click", () => showGame(g.id));
      chipbar.appendChild(c);
    }
    showGame("frank");
  }

  /* =========================================================
     Frankenstein (REVERTED LOGIC EXACTLY)
     - multipliers are read from data-mult on each .fcell
     - total = Σ(val × mult)
     - untouched (all inputs still "1") => show 0.00 white
     - focus clears "1"; blur restores "1" if blank
     - tap total resets to "1"
  ========================================================= */
  const frankCells = Array.from(document.querySelectorAll("#game-frank .fcell"));
  const frankTop = $("frankTop");
  const frankBottom = $("frankBottom");

  function numOrZero(v){
    const t = String(v ?? "").trim();
    if (t === "") return 0;
    const n = Number(t);
    return Number.isFinite(n) ? n : 0;
  }

  function frankIsUntouched(){
    for (const cell of frankCells) {
      const input = cell.querySelector("input");
      if (!input) continue;
      if (input.value.trim() !== "1") return false;
    }
    return true;
  }

  function frankBandClass(total){
    if (total < 17) return "t-red";
    if (total < 17.5) return "t-orange";
    if (total < 18) return "t-yellow";
    return "t-green";
  }

  function frankSetBars(text, cls){
    for (const el of [frankTop, frankBottom]) {
      el.textContent = text;
      el.classList.remove("t-white","t-red","t-orange","t-yellow","t-green");
      el.classList.add(cls);
    }
  }

  function frankRecalc(){
    if (frankIsUntouched()){
      frankSetBars("0.00","t-white");
      if (activeGameId()==="frank") setGlobal("—","Frankenstein","Enter values to score.");
      return;
    }

    let total = 0;
    for (const cell of frankCells){
      const mult = Number(cell.dataset.mult || "0");
      const input = cell.querySelector("input");
      const val = input ? numOrZero(input.value) : 0;
      total += val * mult; // ✅ this is the exact multiplier behavior you pasted
    }

    frankSetBars(total.toFixed(2), frankBandClass(total));

    if (activeGameId()==="frank"){
      setGlobal(total>=18 ? "AP":"NO","Frankenstein", `Total ${total.toFixed(2)} ${total>=18?"≥18":"<18"}.`);
    }
  }

  function frankResetAll(){
    for (const cell of frankCells){
      const input = cell.querySelector("input");
      if (input) input.value = "1";
    }
    frankRecalc();
    const first = document.querySelector("#game-frank .fcell input");
    first?.focus?.();
  }

  frankTop.addEventListener("click", frankResetAll);
  frankBottom.addEventListener("click", frankResetAll);

  for (const cell of frankCells){
    const inp = cell.querySelector("input");
    if (!inp) continue;

    inp.addEventListener("focus", () => {
      if (inp.value.trim() === "1") inp.value = "";
      setTimeout(() => inp.select?.(), 0);
      frankRecalc();
    });
    inp.addEventListener("blur", () => {
      if (inp.value.trim() === "") inp.value = "1";
      frankRecalc();
    });
    inp.addEventListener("input", frankRecalc);
  }

  /* =========================================================
     Temple Falls (kept from prior version)
  ========================================================= */
  const betEl = $("tfBet");
  const barBottom = $("tfTotal");
  const dotBtn = $("tfDot");
  const dotFab = $("tfDotFab");
  const addRowBtn = $("tfAddRow");
  const rowsHost = $("tfRows");
  const BASE_ROWS = 2;
  let lastFocused = null;

  function makeRow({ included } = {}) {
    const row = document.createElement("div");
    row.className = "tfRow";
    row.dataset.included = included ? "true" : "false";

    for (let i = 0; i < 5; i++) {
      const cell = document.createElement("div");
      cell.className = "tfCell";

      const inp = document.createElement("input");
      inp.className = "tfIn";
      inp.type = "text";
      inp.setAttribute("inputmode", "decimal");
      inp.setAttribute("pattern", "[0-9.]*");
      inp.setAttribute("autocorrect", "off");
      inp.setAttribute("spellcheck", "false");
      inp.setAttribute("enterkeyhint", "next");

      cell.appendChild(inp);
      row.appendChild(cell);

      cell.addEventListener("click", (e) => {
        if (e.target !== inp) inp.focus();
      });

      inp.addEventListener("focus", () => { lastFocused = inp; });
      inp.addEventListener("input", () => { recalcTemple(); });
    }

    const total = document.createElement("div");
    total.className = "tfTotal";
    total.textContent = "0.00";
    row.appendChild(total);

    return row;
  }

  function initRowsTemple() {
    rowsHost.innerHTML = "";
    for (let r = 0; r < BASE_ROWS; r++) rowsHost.appendChild(makeRow({ included: true }));
    refreshEnterHintsTemple();
    recalcTemple();
  }

  function getAllRowsTemple() { return Array.from(rowsHost.querySelectorAll(".tfRow")); }
  function getAllInputsTemple(){ return Array.from(rowsHost.querySelectorAll(".tfIn")); }

  function parseBetTemple() {
    const n = Number(String(betEl.value ?? "").trim());
    return Number.isFinite(n) && n > 0 ? n : null;
  }

  function cellValueTemple(raw, bet) {
    const s = String(raw ?? "").trim();
    if (s === "") return 1 / bet; // empty->1 then /bet
    if (s === ".") return 38;
    const n = Number(s);
    if (!Number.isFinite(n)) return 0;
    return n / bet;
  }

  function clamp(x, lo, hi){ return Math.max(lo, Math.min(hi, x)); }

  function setCellColorTemple(inp){
    const cell = inp.closest(".tfCell");
    const s = String(inp.value ?? "").trim();

    if (s === "") { cell.classList.remove("rainbow"); cell.style.background = "#d9f2ff"; return; }
    if (s.includes(".")) { cell.classList.add("rainbow"); cell.style.background = ""; return; }

    const n = Number(s);
    if (!Number.isFinite(n)) { cell.classList.remove("rainbow"); cell.style.background = "#d9f2ff"; return; }

    cell.classList.remove("rainbow");
    const v = clamp(n, 1, 200);
    const t = (v - 1) / 199;
    const light = 92 - t * 22;
    cell.style.background = `hsl(45 90% ${light}%)`;
  }

  function bandClassTemple(total){
    if (total < 50) return "t-red";
    if (total < 60) return "t-orange";
    return "t-green";
  }

  function isEmptyAllTemple(){
    if (String(betEl.value ?? "").trim() !== "") return false;
    return getAllInputsTemple().every(inp => String(inp.value ?? "").trim() === "");
  }

  function setBarTemple(text, cls){
    barBottom.textContent = text;
    barBottom.classList.remove("t-white","t-red","t-orange","t-green");
    barBottom.classList.add(cls);
  }

  function recalcTemple(){
    const rows = getAllRowsTemple();
    const bet = parseBetTemple();

    let bottomTotal = 0;

    for (const row of rows) {
      const rowInputs = Array.from(row.querySelectorAll(".tfIn"));
      rowInputs.forEach(setCellColorTemple);

      let rowSum = 0;
      if (bet) for (const inp of rowInputs) rowSum += cellValueTemple(inp.value, bet);

      row.querySelector(".tfTotal").textContent = rowSum.toFixed(2);

      if (row.dataset.included === "true" && bet) bottomTotal += rowSum;
    }

    if (isEmptyAllTemple() || !bet) {
      setBarTemple("0.00", "t-white");
      if (activeGameId()==="temple") setGlobal("—","Temple Falls","Enter bet size + grid.");
      return;
    }

    setBarTemple(bottomTotal.toFixed(2), bandClassTemple(bottomTotal));
    if (activeGameId()==="temple"){
      setGlobal(bottomTotal>=60 ? "AP":"NO","Temple Falls",`Total ${bottomTotal.toFixed(2)} ${bottomTotal>=60?"≥60":"<60"}.`);
    }
  }

  function resetTemple(){
    betEl.value = "";
    initRowsTemple();
    betEl.focus();
  }
  barBottom.addEventListener("click", resetTemple);
  betEl.addEventListener("input", recalcTemple);

  addRowBtn.addEventListener("click", () => {
    const newRow = makeRow({ included: false });
    rowsHost.prepend(newRow);
    refreshEnterHintsTemple();
    newRow.querySelector(".tfIn")?.focus();
    recalcTemple();
  });

  function insertDotTemple(){
    const inputs = getAllInputsTemple();
    if (!inputs.length) return;
    let idx = lastFocused ? inputs.indexOf(lastFocused) : -1;
    if (idx < 0) idx = 0;
    inputs[idx].value = ".";
    recalcTemple();
    if (idx < inputs.length - 1) inputs[idx + 1].focus();
    else inputs[idx].blur();
  }
  dotBtn.addEventListener("click", insertDotTemple);
  dotFab.addEventListener("click", insertDotTemple);

  function refreshEnterHintsTemple(){
    const inputs = getAllInputsTemple();
    inputs.forEach((inp, i) => inp.setAttribute("enterkeyhint", i === inputs.length - 1 ? "done" : "next"));
  }

  /* ======= Global reset current game ======= */
  $("resetGameBtn").addEventListener("click", () => {
    const id = activeGameId();
    if (id==="frank") frankResetAll();
    if (id==="temple") resetTemple();
    // other games: keep your existing reset logic from the prior full file
  });

  function evalActive(){
    const id = activeGameId();
    if (id==="frank") frankRecalc();
    if (id==="temple") recalcTemple();
    else setGlobal("—","—",""); // other games placeholders in this snippet
  }

  /* ======= init ======= */
  initNav();
  initRowsTemple();
  frankRecalc();

})();
</script>
</body>
</html>
